<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Register</title>
        <link rel="stylesheet" type="text/css" th:href="@{/css/common.css}"/>
        <link rel="stylesheet" type="text/css" th:href="@{/layui/css/layui.css}"/>
        <script th:src="@{/layui/layui.js}"></script>
        <script th:src="@{/js/fetch-wrapper.js}"></script>
    </head>
    <body>
        <div class="account">
            <div class="head">
                <img class="logo" th:src="@{/images/word-logo.png}" >
            </div>
            <div class="content">
                <div class="info">
                    <div style="color: #0047c7;font-size: 24px;">Sign up for myUFHealth</div>
                    <div>
                        Follow these steps to sign up for a myUFHealth account.
                        <br>
                        <ul>
                            <li>Enter your personal information.</li>
                            <li>Verify your identity.</li>
                            <li>Choose a username and password.</li>
                        </ul>
                    </div>
                    <div>
                        If you have any questions, please contact us atÂ 855-422-7300 (toll free) or 617-636-5418 (local).
                    </div>
                </div>
                <div class="layui-form layui-row layui-col-space16" style="background: #e2e6f3;">
                    <div class="layui-col-sm12">
                        <h3>Name</h3>
                    </div>
                    <div class="layui-col-sm4">
                        <input type="text" lay-verify="required" lay-reqtext="Required fields cannot be empty" name="firstName" placeholder="first name" class="layui-input">
                    </div>
                    <div class="layui-col-sm4">
                        <input type="text" lay-verify="required" lay-reqtext="Required fields cannot be empty" name="name" placeholder="name" class="layui-input">
                    </div>
                    <div class="layui-col-sm12">
                        <h3>Address</h3>
                    </div>
                    <div class="layui-col-sm12">
                        <textarea name="address" lay-verify="required" lay-reqtext="Required fields cannot be empty" placeholder="Street Address" class="layui-textarea"></textarea>
                    </div>
                    <div class="layui-col-sm4">
                        <input type="text" name="city" lay-verify="required" lay-reqtext="Required fields cannot be empty" placeholder="City" class="layui-input">
                    </div>
                    <div class="layui-col-sm4">
                        <input type="text" name="state" lay-verify="required" lay-reqtext="Required fields cannot be empty" placeholder="State" class="layui-input">
                    </div>
                    <div class="layui-col-sm4">
                        <input type="text" name="zip" lay-verify="required" lay-reqtext="Required fields cannot be empty" placeholder="ZIP" class="layui-input">
                    </div>
                    <div class="layui-col-sm12">
                        <h3>Other Information</h3>
                    </div>
                    <div class="layui-col-sm4">
                        <div class="layui-input-inline layui-input-wrap">
                            <div class="layui-input-prefix">
                                <i class="layui-icon layui-icon-date"></i>
                            </div>
                            <input type="text" name="birth" lay-verify="required|date" lay-reqtext="Required fields cannot be empty" placeholder="Date of birth" autocomplete="off" class="layui-input date">
                        </div>
                    </div>
                    <div class="layui-col-sm4">
                        <select name="sex" lay-verify="required" lay-reqtext="Required fields cannot be empty">
                            <option value="">Please select Legal sex</option>
                            <option value="Female">Female</option>
                            <option value="Male">Male</option>
                            <option value="Unknown">Unknown</option>
                            <option value="Nonbinary">Nonbinary</option>
                            <option value="X">X</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="layui-col-sm4">
                        <input type="text" name="email" lay-verify="required|email" lay-reqtext="Required fields cannot be empty" placeholder="Email address" class="layui-input">
                    </div>
                    <div class="layui-col-sm4">
                        <input type="password" name="password" lay-verify="required|pass" lay-reqtext="Required fields cannot be empty" placeholder="Password" class="layui-input">
                    </div>
                    <div class="layui-col-sm12">
                        <button type="submit" class="layui-btn layui-btn-primary" style="background: #dbdbdb;" lay-submit lay-filter="register">Next</button>
                    </div>
                </div>
            </div>
        </div>
        <script>
            layui.use(['form', 'laydate', 'util'], function() {
                const form = layui.form
                const layer = layui.layer
                const laydate = layui.laydate
                const util = layui.util
                laydate.render({
                    elem: '.date',
                    lang: 'en',
                })
                form.verify({
                    pass: function(value) {
                        if (!/(.+){6,12}$/.test(value)) {
                            return 'The password must be between 6 and 12 digits long'
                        }
                    }
                })
                form.on('submit(register)', async function(data) {
                    const field = data.field
                    const result = await postRequest('/doRegister', field)
                    console.log(result, 'result')
                    if (result.status == 200) {
                        layer.msg(result.message, {
                            icon: 1,
                            time: 1000
                        }, () => {
                            window.location.href = '/login'
                        })
                    } else {
                        layer.msg(result.message)
                    }
                    return false
                })
            })
        </script>
        <style>
            .content {
                width: 900px;
                margin: 0 auto;
            }
            .content > .info {
                padding: 20px;
                display: flex;
                flex-direction: column;
                gap: 20px;
                color: #363636;
                font-size: 18px;
            }
            li {
                list-style-position: inside;
                list-style-type: disc;
            }
            h3 {
                color: #0e42c6;
            }
        </style>
    </body>
</html>